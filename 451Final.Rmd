---
title: "451Project"
author: "Ling Ma, Debbie Sun"
date: "10/8/2020"
output: html_document
---
# Data Preprocessing
```{r}
# Loading
library(dplyr)
library(naniar)
library(lme4)
library(ggplot2)
library(merTools) #we use this package because we need to use the "predictInterval" function
```

`ODA`: official development assistance
`OOF`: Other Official Flows
`aid_total`:total aid
`polity2`:Recipient Polity Score,  "-10 (hereditary monarchy) to +10 (consolidated democracy)"
`oda_gni`: ODA in percentage in gross national income
`gdp_percap_real`:Recipient GDP Per Capita

`population`: Recipient Population
`recipient_trade_world`:Recipient Total Trade with World
`gdp_per_growth`: GDP per capita growth
`GDP_total_growth`: GDP total growth

```{r pressure, echo=FALSE}
aid = read.csv("processed.csv")
aid
```
First, let's visualize the distribution of the missing data.
```{r}
vis_miss(aid)
vis_miss(aid,cluster = TRUE)
```

# Mixed Effect Model

## What is random effect and fixed effect?

## Our Model


# Regression Analysis
## Initial visualization 

## The impact of Chinese Foreign Aid on recipients
```{r}
ggplot(data = aid, aes(x = Chinese_aid_total, y = GDP_total_growth))+
  geom_point()
```
## Naive Model
```{r}
China_lm <- lm(as.numeric(GDP_total_growth) ~ Chinese_aid_total, data = aid)
```

```{r}
China <- lmer(as.numeric(GDP_total_growth) ~ Chinese_aid_total + (1 | country), data = aid)
summary(China)
confint(China)
```
```{r}
re <- ranef(China)$country

```


```{r}
predictInterval(China)   # for various model predictions, possibly with new data

REsim(China)             # mean, median and sd of the random effect estimates

plotREsim(REsim(China))  # plot the interval estimates
```

## Prediction
```{r}
predict_no_re <- predict(China, re.form=NA)
predict_lm <- predict(China_lm)
predict_with_re <- predict(China)
```

```{r}

```



# U.S. impact on recipents

```{r}
usdata = data %>%
  select(-Chinese_ODA,-Chinese_aid_total)
```
for sensitivity analysis, we will try 1)drop the observations that have missing values. 2)



























